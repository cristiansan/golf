<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>Golf App — Formulario, Links y QR</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="./vendor/qrcode.min.js?v=1"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/flowbite@2.3.0/dist/flowbite.min.js"></script>
    <script defer src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
    <link rel="stylesheet" href="./styles.css?v=2" />
    <style>
      .nav-title { letter-spacing: 0.2px; }
      .tab-btn[aria-selected="true"] { outline: 1px solid var(--primary); box-shadow: 0 0 0 1px var(--primary) inset; }
      .thumb { aspect-ratio: 16 / 9; object-fit: cover; border-radius: 10px; border: 1px solid var(--border); background: #0b1220; }
      .drawer-surface { background: var(--card); border-left: 1px solid var(--border); transition: transform .3s ease-out; }
      .link-card { border: 1px solid var(--border); border-radius: 12px; padding: 12px; background: #0b1220; }
      .field { display: grid; gap: 6px; }
      @keyframes fadeIn { from { opacity: 0; transform: translateY(6px); } to { opacity: 1; transform: translateY(0); } }
      .fade-in { animation: fadeIn 220ms ease-out both; }
      .btn { transition: transform .12s ease-out, opacity .12s ease-out; }
      .btn:active { transform: scale(0.98); }
    </style>
  </head>
  <body class="min-h-screen">
    <header class="sticky top-0 z-50 border-b" style="border-color: var(--border)">
      <div class="container flex items-center gap-3 py-1 relative">
        <h1 class="text-lg font-semibold nav-title">Golf App</h1>
        <button id="btn-drawer" class="absolute top-1 right-0 p-1 rounded-md border btn" style="border-color: var(--border);" aria-controls="app-drawer" aria-label="Abrir menú"><i data-lucide="menu"></i></button>
      </div>
    </header>

    <div id="app-drawer" data-drawer-placement="right" class="fixed top-0 right-0 z-40 h-screen w-64 translate-x-full transition-transform drawer-surface" tabindex="-1" aria-labelledby="app-drawer-label">
      <div class="relative min-h-screen pb-24 flex flex-col">
        <div class="px-4 py-1 border-b" style="border-color: var(--border)"></div>
        <nav class="p-2 space-y-1" style="margin-top: 25px;">
          <button class="w-full text-left px-3 py-2 rounded-md hover:bg-black/20" data-section="formulario">Formulario</button>
          <button class="w-full text-left px-3 py-2 rounded-md hover:bg-black/20" data-section="links">Links</button>
          <button class="w-full text-left px-3 py-2 rounded-md hover:bg-black/20" data-section="qr">QR</button>
        </nav>
        <div class="absolute bottom-0 left-0 right-0 px-4 py-3 border-t" style="border-color: var(--border)">
          <div class="text-xs muted mb-2 text-center">Luciano Sancho Golf</div>
          <img id="drawer-logo" src="./logo.jpeg" alt="Logo" class="w-full block opacity-90" style="margin-bottom:0" onerror="this.style.display='none'; document.getElementById('logo-fallback')?.classList.remove('hidden');" />
          <div id="logo-fallback" class="hidden mt-2 flex items-center justify-center w-28 h-28 rounded-full border" style="border-color: var(--border); background:#000; color:#fff"><span class="text-xs">LS Golf</span></div>
          <div class="mt-2 text-center">
            <button id="btn-changelog" class="text-[11px] underline hover:no-underline muted">v0.2</button>
          </div>
        </div>
      </div>
    </div>

    <main class="container grid gap-6 py-4">
      <section id="sec-formulario" class="card-surface">
        <div class="flex items-center justify-between mb-2">
          <h2 class="text-base font-semibold">Formulario</h2>
        </div>
        <div class="flex gap-2 mb-3">
          <button class="tab-btn px-3 py-2 rounded-md border" style="border-color: var(--border)" data-tab="tab-personales" aria-selected="true">Datos Personales</button>
          <button class="tab-btn px-3 py-2 rounded-md border" style="border-color: var(--border)" data-tab="tab-medica">Info Médica</button>
          <button class="tab-btn px-3 py-2 rounded-md border" style="border-color: var(--border)" data-tab="tab-experiencia">Experiencia</button>
        </div>
        <form id="form-registro" class="grid gap-4">
          <div id="tab-personales" class="grid gap-3">
            <div class="grid md:grid-cols-2 gap-3">
              <label class="field">Nombre y Apellido
                <input class="input-base" name="nombre" required placeholder="Nombre completo" />
              </label>
              <label class="field">Fecha de Nacimiento
                <input class="input-base" type="date" name="nacimiento" required />
              </label>
            </div>
            <div class="grid md:grid-cols-2 gap-3">
              <label class="field">Domicilio
                <input class="input-base" name="domicilio" placeholder="Calle y número" />
              </label>
              <label class="field">Nacionalidad
                <input class="input-base" name="nacionalidad" placeholder="País" />
              </label>
            </div>
            <div class="grid md:grid-cols-3 gap-3">
              <label class="field">Teléfono
                <input class="input-base" name="telefono" inputmode="tel" placeholder="Ej: +54 9 ..." />
              </label>
              <label class="field">Email
                <input class="input-base" name="email" type="email" placeholder="nombre@dominio.com" />
              </label>
              <label class="field">Ocupación
                <input class="input-base" name="ocupacion" placeholder="Profesión / ocupación" />
              </label>
            </div>
          </div>
          <div id="tab-medica" class="hidden grid gap-3">
            <label class="field">Alergias
              <textarea class="textarea-base" name="alergias" rows="2" placeholder="Especificar alergias relevantes"></textarea>
            </label>
            <label class="field">Lesiones o cirugías previas
              <textarea class="textarea-base" name="lesiones" rows="2"></textarea>
            </label>
            <label class="field">Condición médica a tener en cuenta
              <textarea class="textarea-base" name="condicion" rows="2"></textarea>
            </label>
            <div class="grid md:grid-cols-3 gap-3 items-end">
              <label class="field">Apto médico
                <select class="select-base" name="apto">
                  <option value="si">Sí</option>
                  <option value="no">No</option>
                </select>
              </label>
              <label class="field">Vencimiento del apto
                <input class="input-base" type="date" name="apto_vto" />
              </label>
              <label class="field">Adjuntar apto
                <input class="input-base" type="file" name="apto_file" accept="image/*,.pdf" />
              </label>
            </div>
          </div>
          <div id="tab-experiencia" class="hidden grid gap-3">
            <div class="grid md:grid-cols-3 gap-3">
              <label class="field">Años practicando
                <input class="input-base" type="number" name="anios" min="0" />
              </label>
              <label class="field">Hándicap actual
                <input class="input-base" type="number" name="handicap" step="0.1" />
              </label>
              <label class="field">Frecuencia semanal
                <select class="select-base" name="frecuencia">
                  <option>1</option>
                  <option>2</option>
                  <option>3</option>
                  <option>4+</option>
                </select>
              </label>
            </div>
            <div class="grid md:grid-cols-2 gap-3">
              <label class="field">Club o cancha
                <input class="input-base" name="club" />
              </label>
              <label class="field">Modalidad favorita
                <select class="select-base" name="modalidad">
                  <option>Medal Play</option>
                  <option>Match Play</option>
                  <option>Otro</option>
                </select>
              </label>
            </div>
            <label class="field">Clases previas
              <select class="select-base" name="clases_previas">
                <option>Sí</option>
                <option>No</option>
              </select>
            </label>
          </div>
          <div class="flex items-center justify-between pt-2 border-t" style="border-color: var(--border)">
            <button type="button" id="btn-prev" class="px-3 py-2 rounded-md border btn" style="border-color: var(--border)">Anterior</button>
            <div class="flex gap-2">
              <button type="button" id="btn-next" class="px-3 py-2 rounded-md border btn" style="border-color: var(--border)">Siguiente</button>
              <button type="submit" class="px-3 py-2 rounded-md btn-primary btn">Guardar</button>
            </div>
          </div>
        </form>
      </section>

      <section id="sec-links" class="card-surface hidden">
        <div class="flex items-center justify-between mb-2">
          <h2 class="text-base font-semibold">Links (YouTube)</h2>
        </div>
        <div class="grid gap-2 mb-3">
          <label class="field">Nombre
            <input id="yt-title" class="input-base" placeholder="Nombre del video" />
          </label>
          <label class="field">Link
            <input id="yt-url" class="input-base" placeholder="Pegar URL (https://...)" />
          </label>
          <div>
            <button id="btn-add-link" class="px-3 py-2 rounded-md btn-primary btn">Añadir</button>
          </div>
        </div>
        <div id="links-grid" class="grid-cards"></div>
      </section>

      <section id="sec-qr" class="card-surface hidden">
        <div class="flex items-center justify-between mb-2">
          <h2 class="text-base font-semibold">Generador de QR</h2>
        </div>
        <div class="grid md:grid-cols-2 gap-4">
          <div class="grid gap-3">
            <label class="field">URL destino
              <input id="qr-url" class="input-base" value="https://cristiansan.github.io/golf/" />
            </label>
            <div class="flex gap-2">
              <button id="btn-gen-qr" class="px-3 py-2 rounded-md btn-primary btn">Generar</button>
            </div>
          </div>
          <div class="grid place-items-center relative">
            <canvas id="qr-canvas" class="border rounded" style="border-color: var(--border); background:#0b1020; z-index:1"></canvas>
            <div id="qr-debug-overlay" class="absolute inset-0 pointer-events-none" style="border:1px dashed rgba(255,255,255,0.12);"></div>
          </div>
        </div>
      </section>
    </main>

    <!-- Modal: Changelog -->
    <div id="modal-changelog" class="fixed inset-0 z-50 hidden">
      <div id="modal-changelog-overlay" class="absolute inset-0 bg-black/60"></div>
      <div class="relative max-w-lg mx-auto mt-24 bg-[#0f172a] border rounded-lg p-4" style="border-color: var(--border)">
        <div class="flex items-center justify-between mb-2">
          <h3 class="font-semibold">Notas de versión</h3>
          <button id="btn-close-changelog" class="p-2 rounded-md border btn" style="border-color: var(--border)"><i data-lucide="x"></i></button>
        </div>
        <div class="text-sm space-y-4">
          <div>
            <div class="font-medium mb-1">v0.2</div>
            <ul class="list-disc pl-5 space-y-1">
              <li>Links: formulario simplificado (Nombre, Link y botón Añadir).</li>
              <li>Listado en una sola columna; muestra título arriba de la miniatura (ya no editable).</li>
              <li>Seguridad: clave requerida para Añadir; propietario almacenado por hash.</li>
              <li>Borrado protegido: pide clave y valida contra propietario/administrador.</li>
            </ul>
          </div>
          <div>
            <div class="font-medium mb-1">v0.1</div>
            <ul class="list-disc pl-5 space-y-1">
              <li>Estilos migrados a <code>styles.css</code> y corrección de rutas para GitHub Pages.</li>
              <li>Unificación del botón de menú con icono que alterna entre hamburguesa y X; posición a la derecha.</li>
              <li>Ajustes de espaciado del menú lateral y pie centrado.</li>
              <li>Separación del JS a <code>main.js</code>.</li>
              <li>Generador de QR simplificado (tamaño fijo) con fallback y librería local.</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <script defer src="./main.js?v=4"></script>
  </body>
  </html>


